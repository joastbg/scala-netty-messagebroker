
<html><head><title>WebSockets DEMO</title></head>
<body>
<script type="text/javascript">
  
  function init() {
    if (!window.WebSocket) {
      window.WebSocket = window.MozWebSocket;
    } else { 
      alert("Your browser does not support Web Sockets.");
    }
  }

  function log(text) {
    var ta = document.getElementById('consoleText');
    var date = new Date();
    ta.value = ta.value + date.toLocaleTimeString() + "." + date.getMilliseconds() + " - " + text + '\n';
    ta.scrollTop = ta.scrollHeight;
  }

  function connect(topic) {
    var socket;
    if (window.WebSocket) {
      socket = new WebSocket("ws://localhost:8888/" + topic);

      socket.onmessage = function(event) { 
        log(event.data);
      };

      socket.onopen = function(event) { 
        log("Web Socket opened!");
      };

      socket.onclose = function(event) { 
        log("Web Socket closed");
      };
    }
  }
</script>

<h1>WebSockets DEMO</h1>
<form onsubmit="return false;">
 <input type="text" name="message" value="notifications"/>
 <input type="button" value="Connect to topic" onclick="connect(this.form.message.value)" /> 
 <h3>Received</h3>
 <textarea id="consoleText" style="width: 600px; height:300px;"></textarea>
</form>
</body>
</html>
